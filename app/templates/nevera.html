
        <!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página Principal</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <!--  h1{{ saludo }}<br/</h1  -- Mostrar el saludo aquí -->
    <header>
        <p>{{ saludo }} </p>
    </header>

   <form action="{{ url_for('main.save_user_changes') }}" method="POST">
   <button onclick="window.location.href='{{url_for('main.usuario')}}'">X</button>

    <h1>Lista de alacenas</h1>

    <table>
        <thead>
            <tr>
                <th>Nombre</th>
                <th>Opciones</th>
            </tr>
        </thead>
        <tbody>
            {% for item in datos %}
                <tr>
                    <td><a href='{{url_for('main.contenido_nevera', item_id=item[0])}}'>{{ item[2]}}</a></td>
                    <td><a href='{{item[2]}}'>editar</a>, <a href='{{item[2]}}'>eliminar</a></td>
                </tr>
            {% endfor %}
                <tr>
                      <td><button type="button" id="addButton">+</button></td><td></td></tr><tr>
                      <!-- Cuadro de texto oculto para ingresar el nuevo producto -->
                    <td><div id="despensaInput" style="display:none;">
                    <input type="text" id="newDespensa" placeholder="Nuevo producto">
                    <button type="button" id="saveButton">OK</button>
                   </div></td><td></td>
                </tr>



        </tbody>
    </table>

</form>
    <footer>
        <p>{{empresa}}</p>
    </footer>

</body>
<script>
    // Mostrar el cuadro de texto al hacer clic en el botón "+"
    document.getElementById('addButton').onclick = function() {
        document.getElementById('despensaInput').style.display = 'block';
    };

    // Guardar el producto cuando se haga clic en "OK"
    document.getElementById('saveButton').onclick = function() {
        var newDespensa = document.getElementById('newDespensa').value;

   // Hacer la petición POST a Flask para guardar el nuevo producto
        fetch("/guardar_despensa", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({ nombre: newDespensa })
        })
        .then(response => response.json())
        .then(data => {
            console.log(data.message);  // Ver mensaje en consola
            if (data.success) {
                alert("Producto guardado exitosamente");
                // Ocultar el cuadro de texto y limpiar el campo
                document.getElementById('despensaInput').style.display = 'none';
                document.getElementById('newDespensa').value = '';
            } else {
                alert("Hubo un error al guardar la despensa");
            }
        });
          
        // Aquí puedes agregar el código para guardar el nuevo producto
        //console.log("Producto a guardar:", newDespensa); // Temporal: Muestra en consola el valor

        // Ocultar el cuadro de texto
        document.getElementById('despensaInput').style.display = 'none';

        // Limpiar el campo de texto
        document.getElementById('newDespensa').value = '';


    };
</script>


</html>
